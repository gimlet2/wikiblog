<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Sentri.io — errors handling | RestMonkeys tech blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="alternate" type="application/rss+xml" href="https://restmonkeys.com/rss.xml" title="RestMonkeys tech blog RSS Feed">
    <link rel="alternate" type="application/atom+xml" href="https://restmonkeys.com/feed.atom" title="RestMonkeys tech blog Atom Feed">
    <link rel="alternate" type="application/json" href="https://restmonkeys.com/feed.json" title="RestMonkeys tech blog JSON Feed">
    <meta name="description" content="Today I want to talk about one service I’ve discovered for myself last week. As you probably already got from article title it is Sentry.io. This open source project helps you to ...">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.eb280cdd.css" as="style"><link rel="preload" href="/assets/js/app.d34a6604.js" as="script"><link rel="preload" href="/assets/js/6.c23238c3.js" as="script"><link rel="preload" href="/assets/js/3.c7abe0cd.js" as="script"><link rel="preload" href="/assets/js/19.957ad3b6.js" as="script"><link rel="prefetch" href="/assets/js/10.56394ab0.js"><link rel="prefetch" href="/assets/js/11.f0ffa6ae.js"><link rel="prefetch" href="/assets/js/12.b1e44321.js"><link rel="prefetch" href="/assets/js/13.5c0a7845.js"><link rel="prefetch" href="/assets/js/14.5096ecc9.js"><link rel="prefetch" href="/assets/js/15.a34306af.js"><link rel="prefetch" href="/assets/js/16.61856a73.js"><link rel="prefetch" href="/assets/js/17.db224277.js"><link rel="prefetch" href="/assets/js/18.e4f11efb.js"><link rel="prefetch" href="/assets/js/20.4afb06af.js"><link rel="prefetch" href="/assets/js/21.d7e17cea.js"><link rel="prefetch" href="/assets/js/4.de224f30.js"><link rel="prefetch" href="/assets/js/5.22b828f5.js"><link rel="prefetch" href="/assets/js/7.09e8baeb.js"><link rel="prefetch" href="/assets/js/8.f2b37487.js"><link rel="prefetch" href="/assets/js/9.db4a3fa9.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.80342f30.js">
    <link rel="stylesheet" href="/assets/css/0.styles.eb280cdd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/" class="nav-link home-link">RestMonkeys tech blog </a></div> <div class="header-right-wrap"><ul class="nav"></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <a href="/rss.xml" class="feed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/" class="nav-link mobile-home-link">RestMonkeys tech blog </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"> <li class="mobile-nav-item"><a href="/rss.xml" class="feed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        Sentri.io — errors handling
      </h1> <div class="post-meta"><!----> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate itemprop="datePublished" datetime="2017-09-13T00:00:00.000Z">
      Wed Sep 13 2017
    </time></div> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-42ccfcd5><a href="/tag/error-handling" data-v-42ccfcd5><span data-v-42ccfcd5>error-handling</span></a></li><li class="post-tag" data-v-42ccfcd5><a href="/tag/spring-boot" data-v-42ccfcd5><span data-v-42ccfcd5>spring-boot</span></a></li><li class="post-tag" data-v-42ccfcd5><a href="/tag/sentry" data-v-42ccfcd5><span data-v-42ccfcd5>sentry</span></a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><p>Today I want to talk about one service I’ve discovered for myself last week. As you probably already got from article title it is <a href="https://sentry.io/" target="_blank" rel="noopener noreferrer">Sentry.io<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. This open source project helps you to aggregate and monitor information regarding errors happening in your application. Beside opensource version, there is also hosted <a href="https://sentry.io/pricing/" target="_blank" rel="noopener noreferrer">paid<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>(with free Hobbyist plan) version which supposes to be the same.</p> <p>This service provides wide support for different programming languages like Java, C#, Elixir, Go, Javascript, Node, Perl, PHP, Python, etc. The integration process is super easy — you just need to add proper dependency into your project and provide a little bit of <a href="https://docs.sentry.io/clients/java/config/" target="_blank" rel="noopener noreferrer">configuration<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>(at least access token), and you are ready to go.

In my case, it was a <strong>Spring-Boot</strong> application with <strong>logback</strong> logging framework. Both those technologies are supported by Sentry.io. So, I’ve placed <strong>io.sentry:sentry-spring</strong> and <strong>io.sentry:sentry-logback</strong> libraries into projects <strong>Gradle</strong> script. Then I’ve created a new project inside Sentry’s dashboard and generated a token for it. Next step — configuration inside the project. And that is something I don’t like about all that story. Maybe there is some way around but I can’t find it — so, I had to duplicate configuration twice — for logback and for spring-boot respectively. I’ve added <strong>sentry.properties</strong> file in project’s resource folder with <strong>dsn</strong> key inside and <strong>sentry.dsn</strong> key to my <strong>application.yaml</strong>. Also, the configuration of logback appenders was updated with the following block:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SENTRY<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>io.sentry.logback.SentryAppender<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>minLevel</span><span class="token punctuation">&gt;</span></span>ERROR<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>minLevel</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ch.qos.logback.classic.filter.ThresholdFilter<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>level</span><span class="token punctuation">&gt;</span></span>ERROR<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>level</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>And as a final step additional beans for Spring to handle unhandled exceptions and provide additional request context(yes, a little bit of  <strong>Kotlin</strong> ):</p> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code><span class="token annotation builtin">@Bean</span>
<span class="token keyword">fun</span> <span class="token function">sentryExceptionResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> HandlerExceptionResolver <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">SentryExceptionResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token annotation builtin">@Bean</span>
<span class="token keyword">fun</span> <span class="token function">sentryServletContextInitializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> ServletContextInitializer <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">SentryServletContextInitializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>That’s it.</p> <p>But there is much more than just aggregation of errors. Sentry provides useful report channels integrations. For example, it can send notifications by <strong>email</strong> or to S <strong>lack</strong> when there is a new type of error. Or notify you if same error happened more then 100 times per hour. All those rules are extremely flexible and can be configured with Sentry’s dashboard.</p> <p>And there is integration with popular issue trackers like <strong>Jira</strong>. So, it will create a new bug ticket for each new error with stacktrace and all context it has. That should make it easier to fix them.</p> <p>So far looks good.</p></div> <footer><!----> <hr> <!----></footer></article> <!----></div></div> <footer class="footer" data-v-3d9deeb8><div class="footer-left-wrap" data-v-3d9deeb8><ul class="contact" data-v-3d9deeb8><li class="contact-item" data-v-3d9deeb8><a href="https://github.com/gimlet2" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-3d9deeb8><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-3d9deeb8><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-3d9deeb8></path></svg>
          
        </a></li><li class="contact-item" data-v-3d9deeb8><a href="https://twitter.com/gimlet2" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-3d9deeb8><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter" data-v-3d9deeb8><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z" data-v-3d9deeb8></path></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-3d9deeb8><ul class="copyright" data-v-3d9deeb8></ul></div></footer></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.d34a6604.js" defer></script><script src="/assets/js/6.c23238c3.js" defer></script><script src="/assets/js/3.c7abe0cd.js" defer></script><script src="/assets/js/19.957ad3b6.js" defer></script>
  </body>
</html>
