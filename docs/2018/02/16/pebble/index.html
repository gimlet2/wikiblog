<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Kotlin for Pebble | RestMonkeys tech blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="alternate" type="application/rss+xml" href="https://restmonkeys.com/rss.xml" title="RestMonkeys tech blog RSS Feed">
    <link rel="alternate" type="application/atom+xml" href="https://restmonkeys.com/feed.atom" title="RestMonkeys tech blog Atom Feed">
    <link rel="alternate" type="application/json" href="https://restmonkeys.com/feed.json" title="RestMonkeys tech blog JSON Feed">
    <meta name="description" content="The best Smartwatchs are Pebble. Even taking into account that the company producing them was sold, and there will be no more new devices it is still best smartwatchs yo ...">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.eb280cdd.css" as="style"><link rel="preload" href="/assets/js/app.bb0c5adf.js" as="script"><link rel="preload" href="/assets/js/6.e95c38f8.js" as="script"><link rel="preload" href="/assets/js/3.fff0813a.js" as="script"><link rel="preload" href="/assets/js/14.cc4c6c53.js" as="script"><link rel="prefetch" href="/assets/js/10.97c218b7.js"><link rel="prefetch" href="/assets/js/11.457c9032.js"><link rel="prefetch" href="/assets/js/12.101b0f20.js"><link rel="prefetch" href="/assets/js/13.76df7937.js"><link rel="prefetch" href="/assets/js/15.a46a7518.js"><link rel="prefetch" href="/assets/js/16.2a2931f8.js"><link rel="prefetch" href="/assets/js/17.9d7dc5ae.js"><link rel="prefetch" href="/assets/js/18.cf01e316.js"><link rel="prefetch" href="/assets/js/19.17629d7b.js"><link rel="prefetch" href="/assets/js/20.69b8495e.js"><link rel="prefetch" href="/assets/js/21.473e1343.js"><link rel="prefetch" href="/assets/js/22.cde2f64f.js"><link rel="prefetch" href="/assets/js/23.0e4b4d2f.js"><link rel="prefetch" href="/assets/js/24.a0e78e3d.js"><link rel="prefetch" href="/assets/js/4.694138ee.js"><link rel="prefetch" href="/assets/js/5.c3b94c1f.js"><link rel="prefetch" href="/assets/js/7.f1a4d31e.js"><link rel="prefetch" href="/assets/js/8.077201e3.js"><link rel="prefetch" href="/assets/js/9.2da52cfa.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.f5a07918.js">
    <link rel="stylesheet" href="/assets/css/0.styles.eb280cdd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/" class="nav-link home-link">RestMonkeys tech blog </a></div> <div class="header-right-wrap"><ul class="nav"></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <a href="/rss.xml" class="feed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/" class="nav-link mobile-home-link">RestMonkeys tech blog </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"> <li class="mobile-nav-item"><a href="/rss.xml" class="feed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        Kotlin for Pebble
      </h1> <div class="post-meta"><!----> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate itemprop="datePublished" datetime="2018-02-16T00:00:00.000Z">
      Fri Feb 16 2018
    </time></div> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-42ccfcd5><a href="/tag/javascript" data-v-42ccfcd5><span data-v-42ccfcd5>javascript</span></a></li><li class="post-tag" data-v-42ccfcd5><a href="/tag/pebble" data-v-42ccfcd5><span data-v-42ccfcd5>pebble</span></a></li><li class="post-tag" data-v-42ccfcd5><a href="/tag/smartwatch" data-v-42ccfcd5><span data-v-42ccfcd5>smartwatch</span></a></li><li class="post-tag" data-v-42ccfcd5><a href="/tag/kotlin" data-v-42ccfcd5><span data-v-42ccfcd5>kotlin</span></a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><p>The best Smartwatchs are <a href="https://www.pebble.com/" target="_blank" rel="noopener noreferrer"><strong>Pebble</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Even taking into account that the company producing them was sold, and there will be no more new devices it is still best smartwatchs you can buy.</p> <p>It is specially true if you are a software developer or just love to play with code. <strong>Pebbles</strong> provides you with powerful but simple <strong>SDK</strong> for <strong>C</strong> and <strong>Javascript</strong>. And cool web IDE —<a href="https://cloudpebble.net/" target="_blank" rel="noopener noreferrer"><strong>CloudPebble</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. As a result, it is super easy to develop apps and watchfaces.
 <img src="/assets/img/2018-02-16-1.0b3a42f4.jpeg" alt=""></p> <p>But you probably know I am a big fan of <a href="http://kotlinlang.org/" target="_blank" rel="noopener noreferrer"><strong>Kotlin</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, so <strong>C</strong> and <strong>Javascript</strong> were not definitely enough for me! Since <strong>Kotlin-native</strong> at this moment doesn’t support the platforms are used in <strong>Pebble</strong> I’ve decided to go with <strong>KotlinJS</strong>.</p> <p><strong>KotlinJS</strong> is a way to transpile <strong>Kotlin</strong> code to <strong>Javascript</strong>. As a starting point, I took this repo — <a href="https://github.com/pebble/pebblejs" target="_blank" rel="noopener noreferrer">https://github.com/pebble/pebblejs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. This repo provides you the way to develop apps for <strong>Pebble</strong> in <strong>Javascript</strong> locally.</p> <p>First, you need to follow this <a href="https://developer.pebble.com/sdk/install/" target="_blank" rel="noopener noreferrer">https://developer.pebble.com/sdk/install/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> instructions to setup <strong>PebbleSDK</strong>. Also, you need to setup Kotlin command line tools. I am using <a href="http://sdkman.io/" target="_blank" rel="noopener noreferrer"><strong>SDKMan</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for that. As soon as you have all that you are good to go.</p> <p>So, I’ve made a fork of <strong>pebblejs</strong> repo — <a href="https://github.com/gimlet2/pebblekt" target="_blank" rel="noopener noreferrer">https://github.com/gimlet2/pebblekt<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. The first thing to check here is <strong>build.sh</strong> script. It has three steps:</p> <ol><li>Build Kotlin code to Javascript with <strong>kotlinc-js</strong></li> <li>Remove unused code with help of <strong>kotlin-dce-js</strong></li> <li>And <strong>pebble build</strong> to actually produce artifact for Pebble</li> <li>The last step which is not the part of the script — installation — you can use different options of <strong>pebble install</strong>  command.</li></ol> <p>The last thing to focus on — <strong>src</strong>  folder:</p> <ol><li>in <strong>js</strong> folder you will find original <strong>PebbleJS</strong> SDK. Also a result of <strong>Kotlin</strong> transpiling is also could be found here in <strong>app.js</strong>  file.</li> <li><strong>KotlinJs</strong> standard library could be found in <strong>kotlinjs</strong> folder. It is huge but <strong>kotlin-dce-js</strong> is there to fix this.</li> <li>And finally, <strong>kotlin</strong> folder contains bindings to js code(for example <strong>ui.kt</strong> ), some helper functions in <strong>pebble.kt</strong> and <strong>app.kt</strong>  — the application code.</li></ol> <p>If you build and run this code you’ll get typical <em>Hello world</em> app.</p> <p>With this project I want to try to expand <strong>Kotlin</strong> to a new platform. Worth to mention the latest release of <strong>Kotlin-native</strong> (<a href="https://github.com/JetBrains/kotlin-native/releases/tag/v0.6" target="_blank" rel="noopener noreferrer">0.6.0<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>) with a support of <strong>STM32</strong> chips. But that is a story for another post.</p></div> <footer><!----> <hr> <!----></footer></article> <!----></div></div> <footer class="footer" data-v-3d9deeb8><div class="footer-left-wrap" data-v-3d9deeb8><ul class="contact" data-v-3d9deeb8><li class="contact-item" data-v-3d9deeb8><a href="https://github.com/gimlet2" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-3d9deeb8><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-3d9deeb8><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-3d9deeb8></path></svg>
          
        </a></li><li class="contact-item" data-v-3d9deeb8><a href="https://twitter.com/gimlet2" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-3d9deeb8><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter" data-v-3d9deeb8><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z" data-v-3d9deeb8></path></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-3d9deeb8><ul class="copyright" data-v-3d9deeb8></ul></div></footer></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.bb0c5adf.js" defer></script><script src="/assets/js/6.e95c38f8.js" defer></script><script src="/assets/js/3.fff0813a.js" defer></script><script src="/assets/js/14.cc4c6c53.js" defer></script>
  </body>
</html>
