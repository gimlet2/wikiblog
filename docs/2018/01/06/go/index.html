<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Setup Go project - for JVM developers | RestMonkeys tech blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="alternate" type="application/rss+xml" href="https://restmonkeys.com/rss.xml" title="RestMonkeys tech blog RSS Feed">
    <link rel="alternate" type="application/atom+xml" href="https://restmonkeys.com/feed.atom" title="RestMonkeys tech blog Atom Feed">
    <link rel="alternate" type="application/json" href="https://restmonkeys.com/feed.json" title="RestMonkeys tech blog JSON Feed">
    <meta name="description" content="I have been doing development for JVM platform for quite some time already. It was Java back in time, now it is Kotlin. And everything seems logical here — here is your Maven , **Gradl ...">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.eb280cdd.css" as="style"><link rel="preload" href="/assets/js/app.c2572870.js" as="script"><link rel="preload" href="/assets/js/6.e95c38f8.js" as="script"><link rel="preload" href="/assets/js/3.fff0813a.js" as="script"><link rel="preload" href="/assets/js/10.97c218b7.js" as="script"><link rel="prefetch" href="/assets/js/11.457c9032.js"><link rel="prefetch" href="/assets/js/12.101b0f20.js"><link rel="prefetch" href="/assets/js/13.76df7937.js"><link rel="prefetch" href="/assets/js/14.cc4c6c53.js"><link rel="prefetch" href="/assets/js/15.a46a7518.js"><link rel="prefetch" href="/assets/js/16.2a2931f8.js"><link rel="prefetch" href="/assets/js/17.9d7dc5ae.js"><link rel="prefetch" href="/assets/js/18.cf01e316.js"><link rel="prefetch" href="/assets/js/19.17629d7b.js"><link rel="prefetch" href="/assets/js/20.69b8495e.js"><link rel="prefetch" href="/assets/js/21.473e1343.js"><link rel="prefetch" href="/assets/js/22.cde2f64f.js"><link rel="prefetch" href="/assets/js/23.0e4b4d2f.js"><link rel="prefetch" href="/assets/js/24.a0e78e3d.js"><link rel="prefetch" href="/assets/js/4.694138ee.js"><link rel="prefetch" href="/assets/js/5.c3b94c1f.js"><link rel="prefetch" href="/assets/js/7.f1a4d31e.js"><link rel="prefetch" href="/assets/js/8.077201e3.js"><link rel="prefetch" href="/assets/js/9.2da52cfa.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.f5a07918.js">
    <link rel="stylesheet" href="/assets/css/0.styles.eb280cdd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/" class="nav-link home-link">RestMonkeys tech blog </a></div> <div class="header-right-wrap"><ul class="nav"></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <a href="/rss.xml" class="feed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/" class="nav-link mobile-home-link">RestMonkeys tech blog </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"> <li class="mobile-nav-item"><a href="/rss.xml" class="feed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        Setup Go project - for JVM developers
      </h1> <div class="post-meta"><!----> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate itemprop="datePublished" datetime="2018-01-06T00:00:00.000Z">
      Sat Jan 06 2018
    </time></div> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-42ccfcd5><a href="/tag/software-development" data-v-42ccfcd5><span data-v-42ccfcd5>software-development</span></a></li><li class="post-tag" data-v-42ccfcd5><a href="/tag/tools" data-v-42ccfcd5><span data-v-42ccfcd5>tools</span></a></li><li class="post-tag" data-v-42ccfcd5><a href="/tag/golang" data-v-42ccfcd5><span data-v-42ccfcd5>golang</span></a></li><li class="post-tag" data-v-42ccfcd5><a href="/tag/programming" data-v-42ccfcd5><span data-v-42ccfcd5>programming</span></a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><p>I have been doing development for <strong>JVM</strong> platform for quite some time already. It was <strong>Java</strong> back in time, now it is <strong>Kotlin</strong>. And everything seems logical here — here is your <strong>Maven</strong> , <strong>Gradle</strong> or whatever project description with versioned dependencies, when you do build — the artifact is right here. It gives you a sense of workspace. It is easy to develop multiple projects in parallel — they all are isolated from each other.</p> <p>But then the new player comes in that perfect world —  <strong>Go</strong>.
 <img src="/assets/img/2018-01-06-1.5011ca8f.png" alt=""></p><figcaption>image from <a href="https://github.com/zxh0/jvm.go">https://github.com/zxh0/jvm.go</a></figcaption> <strong>$GOROOT</strong>? <strong>$GOPATH</strong>? WTF? Where are project’s dependencies? Is there something like versions? And where are my binaries?!<p></p> <p>I believe that such design of the ecosystem has some rational core and reasoning. But from my(probably not just my) experience it looks like completely parallel universe.</p> <p>To deal with it my first approach was to replicate expected <strong>$GOPATH</strong> folders structure in the project directory —  <strong>bin</strong> , <strong>src</strong> and <strong>pkg</strong>. Then create correct import path inside <strong>src</strong> folder — like <strong>github.com/gimlet2/&lt;someproject&gt;</strong> and checkout project itself there. After this manipulations updating of <strong>$GOPATH</strong> environment variable to point to the project directory. Well, too complicated.</p> <p><img src="/assets/img/2018-01-06-2.26bb8659.png" alt=""></p> <p>To improve it a little bit I’ve decided to use dep package manager. And it became better. Now for each project, I was able to provide a list of dependencies with exact versions. Maybe that isn’t really the <strong>Go</strong> way, but I like it.</p> <p>But still, it was far from ideal. Maybe virtual environment can be helpful here? It is widely used in Python to fix the similar issue. And the first thing I’ve found on <strong>Github</strong> was <a href="https://github.com/crsmithdev/goenv" target="_blank" rel="noopener noreferrer">goenv<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. This project isn’t under active development but it does the job.</p> <p>It is pretty easy to use:</p> <ol><li>Install it go get github.com/crsmithdev/goenv</li> <li>checkout your project</li> <li>then, in your project folder do goenv init github.com/me/myproject</li> <li>active virtual environment . goenv/activate</li></ol> <p>Cool, it works! But <strong>dep</strong> is an issue now. It verifies that your project is located inside appropriate <strong>$GOPATH</strong>. And <strong>goenv</strong> creates virtual <strong>$GOPATH</strong> in <strong>~/.goenv/&lt;project name&gt;</strong>. Inside this folder, it also creates <strong>bin</strong> , <strong>pkg</strong> and src folders and folders structure that you’ve specified with goenv init command. Almost the same steps I was doing manually before. And it makes a symlink to your actual project folder. So, I’ve improved <strong>goenv</strong> a little bit to cd into this virtual project folder on activating of the environment.</p> <p>Now you can run dep ensure right away or start your code editor(personally I use <a href="https://code.visualstudio.com/" target="_blank" rel="noopener noreferrer">Visual Studio Code<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for Go development), work with git, etc. I’ve provided this change as a pull request to the original project. But you can also install it from my fork — go get <a href="https://github.com/gimlet2/goenv" target="_blank" rel="noopener noreferrer">github.com/gimlet2/goenv<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> .</p> <p>Maybe that setup isn’t the best but it works for me. At least now I know what is where and can setup new project in one command.</p></div> <footer><!----> <hr> <!----></footer></article> <!----></div></div> <footer class="footer" data-v-3d9deeb8><div class="footer-left-wrap" data-v-3d9deeb8><ul class="contact" data-v-3d9deeb8><li class="contact-item" data-v-3d9deeb8><a href="https://github.com/gimlet2" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-3d9deeb8><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-3d9deeb8><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-3d9deeb8></path></svg>
          
        </a></li><li class="contact-item" data-v-3d9deeb8><a href="https://twitter.com/gimlet2" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-3d9deeb8><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter" data-v-3d9deeb8><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z" data-v-3d9deeb8></path></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-3d9deeb8><ul class="copyright" data-v-3d9deeb8></ul></div></footer></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.c2572870.js" defer></script><script src="/assets/js/6.e95c38f8.js" defer></script><script src="/assets/js/3.fff0813a.js" defer></script><script src="/assets/js/10.97c218b7.js" defer></script>
  </body>
</html>
