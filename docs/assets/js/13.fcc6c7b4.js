(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{383:function(t,e,o){t.exports=o.p+"assets/img/2018-02-16-1.0b3a42f4.jpeg"},415:function(t,e,o){"use strict";o.r(e);var n=o(11),r=Object(n.a)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("p",[t._v("The best Smartwatchs are "),n("a",{attrs:{href:"https://www.pebble.com/",target:"_blank",rel:"noopener noreferrer"}},[n("strong",[t._v("Pebble")]),n("OutboundLink")],1),t._v(". Even taking into account that the company producing them was sold, and there will be no more new devices it is still best smartwatchs you can buy.")]),t._v(" "),n("p",[t._v("It is specially true if you are a software developer or just love to play with code. "),n("strong",[t._v("Pebbles")]),t._v(" provides you with powerful but simple "),n("strong",[t._v("SDK")]),t._v(" for "),n("strong",[t._v("C")]),t._v(" and "),n("strong",[t._v("Javascript")]),t._v(". And cool web IDE —"),n("a",{attrs:{href:"https://cloudpebble.net/",target:"_blank",rel:"noopener noreferrer"}},[n("strong",[t._v("CloudPebble")]),n("OutboundLink")],1),t._v(". As a result, it is super easy to develop apps and watchfaces.\n"),t._v(" "),n("img",{attrs:{src:o(383),alt:""}})]),t._v(" "),n("p",[t._v("But you probably know I am a big fan of "),n("a",{attrs:{href:"http://kotlinlang.org/",target:"_blank",rel:"noopener noreferrer"}},[n("strong",[t._v("Kotlin")]),n("OutboundLink")],1),t._v(", so "),n("strong",[t._v("C")]),t._v(" and "),n("strong",[t._v("Javascript")]),t._v(" were not definitely enough for me! Since "),n("strong",[t._v("Kotlin-native")]),t._v(" at this moment doesn’t support the platforms are used in "),n("strong",[t._v("Pebble")]),t._v(" I’ve decided to go with "),n("strong",[t._v("KotlinJS")]),t._v(".")]),t._v(" "),n("p",[n("strong",[t._v("KotlinJS")]),t._v(" is a way to transpile "),n("strong",[t._v("Kotlin")]),t._v(" code to "),n("strong",[t._v("Javascript")]),t._v(". As a starting point, I took this repo — "),n("a",{attrs:{href:"https://github.com/pebble/pebblejs",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/pebble/pebblejs"),n("OutboundLink")],1),t._v(". This repo provides you the way to develop apps for "),n("strong",[t._v("Pebble")]),t._v(" in "),n("strong",[t._v("Javascript")]),t._v(" locally.")]),t._v(" "),n("p",[t._v("First, you need to follow this "),n("a",{attrs:{href:"https://developer.pebble.com/sdk/install/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://developer.pebble.com/sdk/install/"),n("OutboundLink")],1),t._v(" instructions to setup "),n("strong",[t._v("PebbleSDK")]),t._v(". Also, you need to setup Kotlin command line tools. I am using "),n("a",{attrs:{href:"http://sdkman.io/",target:"_blank",rel:"noopener noreferrer"}},[n("strong",[t._v("SDKMan")]),n("OutboundLink")],1),t._v(" for that. As soon as you have all that you are good to go.")]),t._v(" "),n("p",[t._v("So, I’ve made a fork of "),n("strong",[t._v("pebblejs")]),t._v(" repo — "),n("a",{attrs:{href:"https://github.com/gimlet2/pebblekt",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/gimlet2/pebblekt"),n("OutboundLink")],1),t._v(". The first thing to check here is "),n("strong",[t._v("build.sh")]),t._v(" script. It has three steps:")]),t._v(" "),n("ol",[n("li",[t._v("Build Kotlin code to Javascript with "),n("strong",[t._v("kotlinc-js")])]),t._v(" "),n("li",[t._v("Remove unused code with help of "),n("strong",[t._v("kotlin-dce-js")])]),t._v(" "),n("li",[t._v("And "),n("strong",[t._v("pebble build")]),t._v(" to actually produce artifact for Pebble")]),t._v(" "),n("li",[t._v("The last step which is not the part of the script — installation — you can use different options of "),n("strong",[t._v("pebble install")]),t._v("  command.")])]),t._v(" "),n("p",[t._v("The last thing to focus on — "),n("strong",[t._v("src")]),t._v("  folder:")]),t._v(" "),n("ol",[n("li",[t._v("in "),n("strong",[t._v("js")]),t._v(" folder you will find original "),n("strong",[t._v("PebbleJS")]),t._v(" SDK. Also a result of "),n("strong",[t._v("Kotlin")]),t._v(" transpiling is also could be found here in "),n("strong",[t._v("app.js")]),t._v("  file.")]),t._v(" "),n("li",[n("strong",[t._v("KotlinJs")]),t._v(" standard library could be found in "),n("strong",[t._v("kotlinjs")]),t._v(" folder. It is huge but "),n("strong",[t._v("kotlin-dce-js")]),t._v(" is there to fix this.")]),t._v(" "),n("li",[t._v("And finally, "),n("strong",[t._v("kotlin")]),t._v(" folder contains bindings to js code(for example "),n("strong",[t._v("ui.kt")]),t._v(" ), some helper functions in "),n("strong",[t._v("pebble.kt")]),t._v(" and "),n("strong",[t._v("app.kt")]),t._v("  — the application code.")])]),t._v(" "),n("p",[t._v("If you build and run this code you’ll get typical "),n("em",[t._v("Hello world")]),t._v(" app.")]),t._v(" "),n("p",[t._v("With this project I want to try to expand "),n("strong",[t._v("Kotlin")]),t._v(" to a new platform. Worth to mention the latest release of "),n("strong",[t._v("Kotlin-native")]),t._v(" ("),n("a",{attrs:{href:"https://github.com/JetBrains/kotlin-native/releases/tag/v0.6",target:"_blank",rel:"noopener noreferrer"}},[t._v("0.6.0"),n("OutboundLink")],1),t._v(") with a support of "),n("strong",[t._v("STM32")]),t._v(" chips. But that is a story for another post.")])])}),[],!1,null,null,null);e.default=r.exports}}]);